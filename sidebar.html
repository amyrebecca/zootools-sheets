<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css" />
    <?!= include('styles'); ?>
  </head>
  <body>
    <div class="block">
      <h1>Scatter Plot Helper</h1>
    </div>
    <div class="block">
      You may change the independent (X) and dependent (Y) variables below, then press Update to redraw the plot.
    </div>
    <div class="block">
      <hr/>
    </div>
    <div class="block">
      <? columnDefs = clientGetVariables(); ?>
      <div class="block form-group collapse" id="xDef">
        <h6 style="cursor: pointer" onclick="toggleVar('x')">X Variable</h6>
        <select id="xVar" style="width: 100%;" oninput="updateSelection('x')" disabled>
          <? for(var i = 0; i < columnDefs.length; i++) { ?>
            <option><?= columnDefs[i].name ?></option>
          <? } ?>
        </select>
        <div class="extended">
          <p><strong>Axis</strong></p>
          <div style="float: right; width: 50%;"><input type="checkbox" id="logX" onclick="updateSelection()"><label for="logX">Logarithmic</label></div>
          <div><input type="checkbox" id="invertX" onclick="updateSelection()"/><label for="invertX">Invert</label></div>
        </div>
        <div class="extended" id="xRange">
          <p><strong>Range</strong></p>
          <p><input type="radio" id="xScaleDefault" name="xScale" onclick="updateSelection()" checked><label for="xScaleDefault">Auto</label></p>
          <p><input type="radio" id="xScaleSpecific" name="xScale" onclick="updateSelection()"><label for="xScaleSpecific">Specified</label></p>
          <div style="text-indent: 1.5em;">
            <div style="text-align: justify"><input type="text" pattern="\d*" id="xMin" style="width: 30%; " disabled/>&nbsp; to &nbsp;<input type="text" pattern="\d*" id="xMax" style="width: 30%; " disabled /></div>
          </div>
        </div>
      </div>
      <div class="block form-group collapse" id="yDef">
        <h6 style="cursor: pointer" onclick="toggleVar('y')">Y Variable</h6>
        <select id="yVar" style="width: 100%;" oninput="updateSelection('y')" disabled>
          <? for(var i = 0; i < columnDefs.length; i++) { ?>
            <option><?= columnDefs[i].name ?></option>
          <? } ?>
        </select>
        <div class="extended">
          <p><strong>Axis</strong></p>
          <div style="float: right; width: 50%;"><input type="checkbox" id="logY" onclick="updateSelection()"><label for="logY">Logarithmic</label></div>
          <div><input type="checkbox" id="invertY" onclick="updateSelection()"/><label for="invertY">Invert</label></div>
        </div>
        <div class="extended" id="yRange">
          <p><strong>Range</strong></p>
          <p><input type="radio" id="yScaleDefault" name="yScale" onclick="updateSelection()" checked><label for="yScaleDefault">Auto</label></p>
          <p><input type="radio" id="yScaleSpecific" name="yScale" onclick="updateSelection()"><label for="yScaleSpecific">Specified</label></p>
          <div style="text-indent: 1.5em;">
            <div style="text-align: justify"><input type="text" pattern="\d*" id="yMin" style="width: 30%; " disabled />&nbsp; to &nbsp;<input type="text" pattern="\d*" id="yMax" style="width: 30%; " disabled /></div>
          </div>
        </div>
      </div>
    </div>
    <div class="block">
      <hr/>
    </div>
    <div class="block form-group" style="text-align: center; ">
      <button id="updateBtn" class="action" onclick="clientChangeSelection()" disabled>Update</button>
      <button onclick="google.script.host.close()">Close</button>
    </div>
    
    <?!= include('client-script'); ?>
  </body>
</html>
